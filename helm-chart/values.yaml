# Default values for email-notification-service

replicaCount: 3

image:
  repository: buerokratt/email-notification-service
  tag: "1.0.0"
  pullPolicy: Always

imagePullSecrets: []

nameOverride: ""
fullnameOverride: ""

environment: production

# Email configuration
email:
  provider: smtp  # smtp, ses, sendgrid
  from: noreply@buerokratt.ee
  replyTo: support@buerokratt.ee
  idempotency:
    enabled: true
  worker:
    enabled: true
  defaultLocale: et

  # SMTP settings
  smtp:
    host: smtp.example.com
    port: 587
    auth: true
    starttls: true
    debug: false

  # Retry settings
  retry:
    maxCritical: 5
    maxHigh: 3
    maxNormal: 2
    maxLow: 1

# Service configuration
service:
  type: ClusterIP
  port: 8085
  annotations: {}

# Ingress configuration
ingress:
  enabled: true
  className: nginx
  annotations:
    cert-manager.io/cluster-issuer: letsencrypt-prod-issuer
    nginx.ingress.kubernetes.io/ssl-redirect: "true"
  hosts:
    - host: email.buerokratt.ee
      paths:
        - path: /
          pathType: Prefix
  tls:
    - secretName: email-notification-tls
      hosts:
        - email.buerokratt.ee

# Resource limits and requests
resources:
  limits:
    cpu: 1000m
    memory: 1Gi
  requests:
    cpu: 250m
    memory: 512Mi

# Autoscaling
autoscaling:
  enabled: true
  minReplicas: 3
  maxReplicas: 10
  targetCPUUtilizationPercentage: 70
  targetMemoryUtilizationPercentage: 80

# Node selector
nodeSelector: {}

# Tolerations
tolerations: []

# Affinity
affinity: {}

# Pod annotations
podAnnotations: {}

# Pod security context
podSecurityContext: {}
  # fsGroup: 1000

# Container security context
securityContext: {}
  # runAsNonRoot: true
  # runAsUser: 1000

# Service account
serviceAccount:
  create: true
  annotations: {}
  name: ""

# External service URLs
tim:
  url: http://byk-tim
  port: 8083

resql:
  url: http://byk-resql
  port: 8082

rabbitmq:
  host: rabbitmq
  port: 5672
  username: guest
  password: guest

opensearch:
  url: http://opensearch
  port: 9200

# Redis for caching
redis:
  host: redis
  port: 6379
  password: ""

# Logging configuration
logging:
  levelRoot: INFO
  levelApp: WARN
  levelAmqp: INFO
  levelSecurity: INFO

# Prometheus monitoring
prometheus:
  enabled: true
  serviceMonitor:
    enabled: true
    interval: 30s
    scrapeTimeout: 10s

# Pod disruption budget
podDisruptionBudget:
  enabled: true
  minAvailable: 1

# Health probes
livenessProbe:
  httpGet:
    path: /actuator/health/liveness
    port: 8085
  initialDelaySeconds: 60
  periodSeconds: 10
  timeoutSeconds: 3
  failureThreshold: 3

readinessProbe:
  httpGet:
    path: /actuator/health/readiness
    port: 8085
  initialDelaySeconds: 30
  periodSeconds: 5
  timeoutSeconds: 3
  failureThreshold: 3

# ConfigMap and Secret volumes
volumes: []
volumeMounts: []

# Environment variables from ConfigMaps/Secrets
envFrom: []
